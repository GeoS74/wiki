# Контейнеры Docker

Контейнеры запускаются на основе [[Image - образы Docker|образов  Docker-a]].

Посмотреть список всех контейнеров:
```bash
//список, работающих контейнеров
sudo docker ps

//для вывода всех контейнеров
sudo docker ps --all
```


### Запуск контейнера

Для создания и запуска [[Контейнеры Docker|контейнера]] использовать:
```bash
sudo docker run <image_name or image_id>
```
Эта команда создаст новый контейнер и запустит его. Причем после остановки контейнера он не удаляется, а становится не активным. Повторные вызовы этой команды будут создавать новые контейнеры.

Пример запуска [[Image - образы Docker|образа]] [[NodeJS]] в интерактивном режиме:
```bash
sudo docker run -it node
```

Чтобы не создавать новые контейнеры, можно воспользоваться командой `start` или `restart`. Разница в том, что `restart` перезапустит уже работающий контейнер:

```bash
sudo docker start <container_name or container_id>
```

В этом случае будет запущен уже существующий контейнер. В опциях этой команды есть только возможность указания времени ожидания перед уничтожением контейнера. Как это работает пока не понятно, т.к. контейнер не уничтожается, зато это работает с командой `stop`.

Если контейнер запущен, то к нему можно подключиться командой `start`. У этой команды есть 2 интересных флага (см. подсказку к ней). Если сеанс на терминале подключен к контейнеру в интерактивном режиме, то попытка подключения к контейнеру из другого терминала подключится к тому же сеансу.

### Остановка контейнера

Для остановки контейнера есть команда `stop`. В опциях этой команды есть только возможность указания времени ожидания перед остановкой контейнера в секундах (по умодчанию 10).
```bash
sudo docker stop -t 0 <container_name or container_id>
```

### Удаление контейнеров
Для удаления конкретных контейнеров:
```
sudo docker rm <container_name or container_id>
```

Для удаления всех остановленных контейнеров:
```bash
sudo docker container prune
```

### Запуск команд в работающем контейнере

```bash
sudo docker exec -it <container_name> /bin/bash

# или так
sudo docker exec -it <container_name> bash
```


### Полезные команды

Подключиться к запущенному контейнеру:
```bash
sudo docker attach <container_id>
```

Посмотреть вывод контейнера в stdout:
```bash
sudo docker logs <container_id>
```