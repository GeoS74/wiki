# Вызов контент-скрипта из сервис-воркера

Возможна ситуация при которой вкладка браузера будет открыта, но клиент-скрипт не будет иметь связь с сервис-воркером. Например, вкладка открыта, а плагин был выключен и включен снова.  Получается, что сервис-воркер перезапустился, а контент-скрипт нет. Есть непроверенная информация, что firefox коректно обрабатывает такую ситуацию, но в chrome требуется перезапустить вкладку.
Если таких вкладок много, то можно инициировать перезапуск контент-скрипта из сервис-воркера:

```js
chrome.tabs.onActivated.addListener(async () => {
  // вызов активной вкладки
  const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });

  // перезапуск контент-скрипта
  chrome.scripting.executeScript({
      target: { tabId: tab.id },
      files: ["src/index.js"],
  })
  .catch(error => console.log(`error: ${error.message}`));
});
```

> Прим.: корневой директорией считается корневая директория плагина, там где располагается manifest.json

В файле `manifest.json` обязательно должна быть указана директива с маской для каких страниц возможен вызов контент-скрипта из сервис-воркера:

```
"host_permissions": ["https://*/*"],
```