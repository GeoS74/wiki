# Использование официальных образов

Примеры использования некоторых официальных [[Image - образы Docker|образов Docker]].

### Node
Если просто запустить контейнер на основе образа Node, то он после запуска тут же завершиться, т.к. у него нет команд для выполнения. Но, можно запустить контейнер  [[NodeJS]] в интерактивном режиме (REPL).
Запуск контейнера в интерактивном режиме на основе образа Node:
```bash
sudo docker run -it node
```

### PostgreSQL

Для запуска [[Контейнеры Docker|контейнера]] на основе образа [[PostgreSQL]] надо обязательно пробросить порты наружу, иначе будет не возможно подключиться к контейнеру из другого контейнера или из хоста. По умолчанию [[PostgreSQL]] работает на порту `5432`, если на локальной машине уже запущен сервер PostgreSQL, и надо использовать именно этот порт, то локальный сервер надо [[Управление сервером PostgreSQL|остановить]]. Также, надо обязательно указать пароль `POSTGRES_PASSWORD` для доступа к БД.
```bash
# запуск контейнера
sudo docker run --rm -d -p 5432:5432 --name testdb -e POSTGRES_PASSWORD=secretpass postgres

# подключение к контейнеру
sudo docker exec -it postgres bash

# подключение к БД
psql -U postgres -h localhost
```

>Прим.: команда подключения к БД внутри контейнера несколько отличается от той, которая используется на локальной машине. В случае подключения к БД на локальной машине, сначала надо сменить пользователя на `postgres`, а затем подключаться. После подключения к контейнеру PostgreSQL (если я правильно понимаю) подключение по умолчанию выполняется под пользователем `postgres`, следовательно можно сразу подключаться к БД

Пример запуска контейнера [[PostgreSQL]] и запуск другого контейнера с подключением к первому, используя [[Подключение к psql|psql]].

```bash
# создать сеть
sudo docker network create darknet

# запуск первого контейнера
sudo docker run --rm -d --name db -e POSTGRES_PASSWORD=admin --network darknet postgres

# запуск второго контейнера с psql
sudo docker run -it --rm --network darknet postgres psql -h db -U postgres
```

### MongoDB

В официальной документации к образу [[MongoDB]] указаны не совсем работающие интсрукции. Вот рабочий пример запуска контейнера MongoDB и запуск другого контейнера с подключением к первому, используя [[MongoDB shell (mongosh)]]. Cм. также [[Запуск mongosh|использование флагов mongosh]].

```bash
# создать сеть
sudo docker network create darknet

# запуск первого контейнера
sudo docker run -d --rm --name db --network darknet mongo

# запуск второго контейнера с mongosh
sudo docker run -it --rm --network darknet mongo mongosh --host db
```

При запуске второго контейнера, в качестве хоста для mongosh указывается имя первого контейнера.

