
# Очистка системы от не нужных и временных файлов


#### Посмотреть используемое дисковое пространство

```bash
df -h
```

Пояснение вывода:

- /dev/vda1 - основной диск
- tmpfs - виртуальная файловая система в RAM
- overlay - файловая система Docker. Может показывать те же цифры что и основной диск (т.к. данные там).

#### Очистить кэш скачанных deb-пакетов.

```bash
sudo apt clean && sudo apt autoclean
```

- `apt clean` - удалит ВСЕ скачанные deb-файлы из `/var/cache/apt/archives/`
- `apt autoclean` - удалит ТОЛЬКО старые версии пакетов (которые нельзя установить)

Результат: Освободит место, но безопасно. Не удалит установленные программы.


#### Очистка логов [[Ubuntu]] кроме сегодняшних

```bash
sudo find /var/log -type f -name "*.log" -mtime +1 -delete 
sudo journalctl --vacuum-time=1d
# Внимание: После journalctl нужен restart:
sudo systemctl restart systemd-journald
```

- Удалит log-файлы старше 1 дня из /var/log/
- Удалит журналы systemd старше 1 дня


#### Очистка временных файлов в /tmp/

```bash
sudo rm -rf /tmp/*
```

Удалит ВСЁ содержимое папки /tmp/

Что удалит:
- Временные файлы программ
- Сессионные данные
- Кэши браузеров (если есть)
- Lock-файлы

Безопасно ли? Да, /tmp/ очищается при перезагрузке. Но:
- Закрой все программы перед выполнением
- Если есть важные сессии - они сбросятся

>Примечание: Docker контейнеры не хранят данные в `/tmp/`, запущенные контейнеры можно не останавливать


#### Найти большие файлы

```bash
# Искать файлы > 100MB
sudo find / -type f -size +100M -exec ls -lh {} \; 2>/dev/null
```

#### Проверить удаленные, но открытые файлы

```bash
lsof | grep deleted
```



#clean