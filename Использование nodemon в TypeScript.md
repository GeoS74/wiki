# Использование nodemon в TypeScript

##### Простое использование

Для использования [[nodemon]] в [[TypeScript]] нужен ещё один пакет: `ts-node`. Он позволит запускать код без "компиляции". На самом деле компиляция в любом случае будет, просто не будут создаваться файлы сборки. В данной комбинации `nodemon` нужен для отслеживания изменений и повторного вызова `ts-node`.

>Прим. В Windows пакет `ts-node` должен быть установлен глобально (с флагом `-g`)

Установка:

```bash
npm i --save-dev -g ts-node nodemon
```

Создать конфигурационный файл `nodemon.json`:
```json
{
  "watch": ["src"],
  "ext": ".ts,.js",
  "ignore": [],
  "exec": "ts-node ./src/index.ts"
}
```

Для использования достаточно просто вызвать:
```bash
nodemon
```

В этом случае `nodemon` вызовет `ts-node`, который в свою очередь скомпилирует код и выполнит файл `./src/index.ts`.

##### Улучшенное использование
Подход, описанный выше хорош если в проекте есть 1 входной файл и он не меняется (`"exec": "ts-node ./src/index.ts"`), но что если надо скомпилировать другой файл, не указанный в директории "exec"? 
Другими словами, я хочу сам указывать какой файл нужно компилировать.

Чтобы этого добиться, надо передать файл через [[CLI]] как аргумент для `ts-node`. Вот как это сделать:

файл `nodemon.json`:

```json
{
  "watch": ["src"],
  "ext": ".ts,.js",
  "ignore": [],
  "exec": "ts-node"
}
```

Запуск `nodemon`:

```bash
nodemon -- ./src/test
```

Аргументы должны передаваться через разделитель `--`

- [Подробнее про передачу аргументов](https://stackoverflow.com/questions/11580961/sending-command-line-arguments-to-npm-script) в скрипты [[Создание пакета npm|npm]]

- [Использование nodemon в Typescript](https://khalilstemmler.com/blogs/typescript/node-starter-project/)


#nodemon #ts-node