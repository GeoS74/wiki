# sudo

>В Debian 10 sudo надо устанавливать отдельно [как показано здесь](https://losst.ru/ustanovka-sudo-v-debian-10)

### Синтаксис

**sudo** <span style="color:red">опции</span> <span style="color:yellow">программа</span> <span style="color:green">параметры</span>

### Опции
-   **-A** или **--askpass** - по умолчанию sudo спрашивает пароль пользователя в терминале. Если задана эта опция, утилита попробует использовать графическую утилиту для запроса пароля.
-   **-b** или **--background** - запускает переданную программу в фоновом режиме;
-   **-C** или **--close-from** - опции нужно передать число больше трёх. Она позволяет закрыть для программы все файловые дескрипторы, кроме стандартного ввода и вывода;
-   **-E** или **--preserve-env** - позволяет передать переменные окружения текущего пользователя выполняемой программе. Также можно передать этой опции список переменных, которые нужно разрешить;
-   **-e** или **--edit** - позволяет редактировать файл вместо запуска команды. Файл копируется во временный каталог, редактируется с помощью редактора, установленного в системе по умолчанию, и если были изменения, записывается обратно с теми самыми правами;
-   **-g** - запустить команду с указанной группой вместо группы пользователя, от имени которого запускается программа;
-   **-h** - выполнить команду от имени другого хоста;
-   **-H** или **--set-home** - установить домашний каталог;
-   **-i** или **--login** - позволяет авторизоваться в консоли от имени другого пользователя. Будет выбран его домашний каталог, а также загружены все переменные окружения;
-   **-k** - по умолчанию, sudo сохраняет пароль и некоторое время после выполнения команды, вы можете выполнить ещё раз, без ввода пароля. Эта опция отключает такую возможность;
-   **-l** или **--list** - позволяет вывести список доступных команд для удалённых пользователей;
-   **-n** или **--non-interactive** - не интерактивный режим, если будет необходимо ввести пароль, программа выдаст ошибку;
-   **-p** или **--prompt** - использовать своё приглашение для ввода пароля;
-   **-r** или **--role** - выполнить программу с контекстом SELinux, у которого есть указанная роль;
-   **-S** - использовать стандартный поток ошибок для запроса пароля;
-   **-s** или **--shell** - позволяет запустить указанный командный интерпретатор;
-   **-U** или **--User** - вместе с опцией -l позволяет посмотреть привилегии для пользователя;
-   **-T** или **--timeout** - позволяет установить время выполнения команды, если время истечёт раньше, чем завершится команда, то она будет завершена принудительно;
-   **-u** - позволяет указать, от имени какого пользователя нужно выполнять программу;
-   **-V** - выводит версию утилиты;
-   **--** - означает, что следующие опции обрабатывать не нужно.

### Использование

Для того чтобы залогиниться под рута:
```
$ sudo -i
```

Вернуться обратно под пользователя:
```
$ su geos
```

Или альтернативный вариант залогиниться под пользователя:
```
$ sudo -i -u geos
```

Выполнить команду под другим пользователем:
```
$ sudo -u any_user whoami
```

По умолчанию, команда sudo не передаёт запускаемой утилите переменные окружения текущего пользователя. А когда вы запускаете графическое приложение, то ему нужна переменная DISPLAY для доступа к графическому серверу. В последних версиях [[Ubuntu]] всё немного по другому, но все же эта возможность sudo актуальна. Чтобы передать переменные просто используйте опцию -E:
```
$ sudo -E env
```
Без опции -E программа получает только 18 стандартных переменных, а с опцией - все доступные.


[Источник](https://losst.ru/komanda-sudo-v-linux)


#ubuntu #sudo
