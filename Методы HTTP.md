# Методы HTTP

### GET
Согласно [спецификации  RFC2616](https://datatracker.ietf.org/doc/html/rfc2616#section-9.3):
Метод GET означает получение любой информации (в виде сущности) и идентифицируется Request-URI. Если Request-URI ссылается на процесс "производства" данных, то именно произведенные данные должны быть возвращены в виде сущности в ответе, а не как исходный текст процесса, если только этот текст не является результатом процесса.

### POST
Метод применяется для записи нового ресурса, доступ к которому определяется в Request-URI. Согласно  [RFC2616](https://datatracker.ietf.org/doc/html/rfc2616#section-9.5) размещенный объект является подчиненным этому URI так же, как файл является подчиненным  к каталогу, содержащему его, новостная статья подчинена группе новостей, в которую она отправлена, или запись подчинена базе данных.
Действие, выполняемое методом POST, может не привести к ресурсу, который можно идентифицировать по URI. В этом случае ответ должен быть:
- 200 если создан новый ресурс (который не идентифицируется по передаваемому URI) и тело ответа передаётся клиенту;
- 204 в аналогичном случае, но ответ не содериж данных.

В случае если созданный ресурс можно идентифицировать по URI на исходном сервере возвращается ответ 201
> Примечание:
Разница между [PUT](https://developer.mozilla.org/ru/docs/Web/HTTP/Methods/PUT) и POST состоит в том, что PUT является идемпотентным: повторное его применение даёт тот же результат, что и при первом применении (то есть у метода нет _побочных эффектов_), тогда как повторный вызов одного и того же метода POST может иметь такие эффекты, как например, оформление одного и того же заказа несколько раз.

### PUT
Метод создаёт новый ресурс или полностью изменяет целевой ресурс исходя из передаваемых данных. Здесь ключевое слово __полностью__, т.к. для частичного изменения есть метод __PATCH__.
Метод всегда идемпотентный. Т.е. многочисленные вызовы с идентичным набором данных всегда возвращают один и тот же результат. Из этого вытекает, что метод не должен изменять автоинкрементное поле (если оно есть).
Ответ зависит от реализации на сервере и может быть:
- 201 если создан новый ресурс;
- 200 если ресурс успешно мутирован и возвращается тело сообщения;
- [204](https://developer.mozilla.org/ru/docs/Web/HTTP/Status/204) если ресурс успешно мутирован и возвращается пустой ответ.
По [спецификации RFC2616](https://datatracker.ietf.org/doc/html/rfc2616) Сервер не должен игнорировать заголовки Content-* (например, Content-Range), которые он не понимает или не реализует. В этом случае необходимо вернуть ответ [501 (Not Implemented)](https://developer.mozilla.org/ru/docs/Web/HTTP/Status/501).

Не совсем понятно, что надо возвращать если целевой ресурс не найден.

>Примечание:
Фундаментальное различие между запросами POST и PUT отражается в различном значении Request-URI. URI в запросе POST идентифицирует ресурс, который будет обрабатывать вложенный объект. Этот ресурс может быть хоть чем, например процессом, принимающим данные, шлюзом для какого-либо другого протокола или отдельным объектом, который принимает аннотации. Напротив, URI в запросе PUT идентифицирует объект, заключенный в запросе - пользовательский агент (клиент) знает, по какому URI требуется изменить ресурс, и сервер НЕ ДОЛЖЕН пытаться применить запрос к какому-либо другому ресурсу. Если сервер желает, чтобы запрос был применен к другому URI, он должен отправить ответ [301 (перемещен навсегда)](https://developer.mozilla.org/ru/docs/Web/HTTP/Status/301). Клиент может затем принять собственное решение относительно того, перенаправлять запрос или нет.

### PATCH
Метод не описывается в спецификации RFC2616, вместо этого спецификация ссылается на предыдущую версию спецификации RFC2068.
> Выдержка из [RFC2616](https://datatracker.ietf.org/doc/html/rfc2616):
> Методы PATCH, LINK, UNLINK были определены, но не всегда реализованы в предыдущих версиях этой спецификации. См. [RFC 2068](https://datatracker.ietf.org/doc/html/rfc2068)
> 
> The PATCH, LINK, UNLINK methods were defined but not commonly implemented in previous versions of this specification. See [RFC 2068](https://datatracker.ietf.org/doc/html/rfc2068)

Метод PATCH аналогичен PUT (из спец. RFC2068), это скорее всего означает, что URI в запросе PUT идентифицирует целевой объект, заключенный в запросе (см. примечание к PUT).

Не совсем понятно, что надо возвращать если целевой ресурс не найден.

Этот метод предназначен для частичного (или полного в зависимости от передаваемых данных) изменения целевого ресурса. 
Не совсем понятно, что должно происходить с автоинкрементными полями. Спецификация [developer.mozilla](https://developer.mozilla.org/ru/docs/Web/HTTP/Methods/PATCH) говорит, что такое поле может быть изменено, а может и нет.
Из этого следует, что может быть идемпотентным, а может и нет. Т.е. многочисленные вызовы с идентичным набором данных может возвращать один и тот же результат, а может разные.

Ответ зависит от реализации на сервере и может быть:
- 200 если возвращается тело сообщения;
- [204](https://developer.mozilla.org/ru/docs/Web/HTTP/Status/204) если возвращается пустой ответ.


### DELETE
Метод запрашивает, чтобы исходный сервер удалил ресурс. При этом сервер может ответить раньше, чем выполнит операцию удаления.
Возвращаемые ответы по [спецификации RFC2616](https://datatracker.ietf.org/doc/html/rfc2616#section-9.7):
- 200 если возращается тело;
- 204 если ответ не имеет тела;
- [202](https://developer.mozilla.org/ru/docs/Web/HTTP/Status/202) если операция удаления ещё не выполнена.

#http #restAPI #api