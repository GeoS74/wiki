# Изменить порт для разработки по умолчанию

[Использование env файла в React](https://create-react-app.dev/docs/adding-custom-environment-variables/#what-other-env-files-can-be-used)

Приоритетность обработки .env файлов:

- `npm start`: `.env.development.local`, `.env.local`, `.env.development`, `.env`
- `npm run build`: `.env.production.local`, `.env.local`, `.env.production`, `.env`
- `npm test`: `.env.test.local`, `.env.test`, `.env` (note `.env.local` is missing)

После [[Создать проект React | создания проекта react]] можно изменить порт сервера. По-умолчанию сервер для разработки react приложений запускается на порту 3000.
В файле *package.json* в секции *scripts* надо посмотреть какой скрипт вызывается при запуске сервера командой `npm start`. Пример файла *package.json*:
```
...
"scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
...
```
В данном случае нужно открыть файл:
*/node_modules/react-scripts/scripts/start.js*
Порт по-умолчанию указывается в строке:
```
const DEFAULT_PORT = parseInt(process.env.PORT, 10) || 3000;
```

Можно изменить значение 3000 на другое или в начале файла, чтобы не лазить вглубь кода, просто добавить следующую строку:
```
process.env.PORT = 3001;
...any code...
const DEFAULT_PORT = parseInt(process.env.PORT, 10) || 3000;
```

### Самый простой способ

Самый простой способ изменить порт для [[React]] приложения - это:
1) в корне проекта создать файл `.env`
2) добавить в него запись: `PORT=3001`

Вот [здесь](https://create-react-app.dev/docs/adding-custom-environment-variables/) сказано, что для создания собственный переменных надо указывать префикс `REACT_APP_`, любые другие переменные будут игнорироваться. Но, в данном случае происходит переопределение переменной окружения React, поэтому такой способ работает.