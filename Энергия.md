# Энергия
[[Список транспортных компаний]]

[ссылка на документацию API](http://apidoc.nrg-tk.ru/v3/ru/)

[[Создание справочника Энергия|Создание справочника]]

(жду окончания работ API v3 для оформления токен, но можно использовать API v2)

- API версии 3 так и не работает, не возможно получить токен в личном кабинете
- метод /cityPost - возвращает города, обслуживаемые [[Почта России|Почтой России]]. Зачем не знаю.  Для обратной совместимости доступен метод /city_post
- **Замечание** по ограничению частоты запросов. Для каждого запроса установлено ограничение.  
На данный момент это **120 запросов в минуту с одного ip адреса**.  
При превышении этого лимита, возвращается ошибка TooManyRequests с http кодом 429.
- в справочнике городов есть загадочный ключ "type", возможно он предназначен для определения типа населённого пункта, т.к. type=1 у городов, хотя у Еманжелинска type=3, но он помечен как город
- В списке нет г. Мирный Архангельской обл., зато есть несколько пунктов Мирный в Краснодарском крае
- при поиске города по справочнику используется поиск по названию и коду КЛАДР региона
- API возвращает объект transfer в котором могут быть разные виды доставки: авто, жд, авиа. Сейчас игнорируются все, кроме авто