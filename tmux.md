# tmux

Tmux - это терминальный мультиплексор или иными словами, вы можете в одном терминале запустить несколько терминальных сессий и переключаться между ними или даже разместить их в одном окне, а также отключиться от сессии оставив её работать в фоне, а затем вернуться и посмотреть результат, это может быть очень удобно при работе по SSH.

### Установка
```
$ sudo apt-get install tmux
```

### Синтаксис
tmux <span style="color:yellow">команда</span> <span style="color:green">опции</span>

#### Опции
Что касается опций, то в большинстве вам придется использовать только две - это 
- t (target) - которая указывает цель, к которой будет применяться команда, например, идентификатор сессии или подключенного клиента;
- s (session) - который обычно используется для обозначения источника, над которым будет выполняться действие.


#### Команды

-   **attach-session (attach)** - подключиться к уже существующей сессии. В параметре необходимо передать опцию -t и идентификатор сессии;
-   **detach-session (detach)** - отключить всех клиентов (или переданного с помощью опции -t) от сессии, переданной в опции -s;
-   **has-session** - проверить существует ли сессия, аналогично, надо передать идентификатор сессии;
-   **kill-server** - остановить все запущенные сессии;
-   **kill-session** - завершить сессию переданную в параметре -t;
-   **list-clients** - посмотреть клиентов, подключенных к сессии -t;
-   **list-sessions (ls)** - вывести список всех запущенных сессий;
-   **new-session** - создать новую сессию, можно передать имя сессии в опции -s и стартовую директорию в опции -c;
-   **rename-session** - переименовать сессию, нужно передать идентификатор сессии и новое имя.

### Использование

По умолчанию для активации сочетания клавиш нужно нажать Ctrl+B, отпустить, а потом нажать нужную клавишу. Вот основные сочетания клавиш tmux, которые вам понадобятся:

-   **Ctrl+b c** - создать новое окно;
-   **Ctrl+b w** - выбрать окно из списка;
-   **Ctrl+b 0-9** - открыть окно по его номеру;
-   **Ctrl+b ,** - переименовать текущее окно;
-   **Ctrl+b %** - разделить текущую панель по горизонтали;
-   **Ctrl+b "** - разделить текущую панель по вертикали;
-   **Ctrl+b стрелка** - перейти на панель, находящуюся в стороне, куда указывает стрелка;
-   **Ctrl+b Ctrl+стрелка** - изменить размер текущей панели;
-   **Ctrl+b o** - перейти на следующую панель;
-   **Ctrl+b ;** - переключаться между текущей и предыдущей панелью;
-   **Ctrl+b x** - закрыть текущую панель;
-   **Ctrl+b [** - войти в режим копирования (подробнее ниже);
-   **Ctrl+b ]** - вставить из внутреннего буфера обмена tmux;
-   **Ctrl+b d** - отключится от текущей сессии;
-   **Ctrl+b :** - открыть командную строку.

### Примеры
Чтобы создать новую сессию достаточно выполнить команду без параметров:

```
$ tmux
```

Также можно создать сессию командой new-session и задать ей удобное имя:

```
$ tmux new-session -s geos
```

Посмотреть список сессий можно командой ls:

```
$ tmux ls
```

 для подключения к сессии (attach):

```
$ tmux attach -t geos

# или проще, для подключения к активной сессии
$ tmux attach
```

### Поддержка мыши
По умолчанию поддержка мышки отключена, но если вы работаете в графическом окружении, вы можете её включить. Это даст несколько преимуществ: вы сможете выбирать активную панель мышкой, копировать текст во внутренний буфер обмена, менять размер панелей, использовать прокрутку для просмотра истории вывода и так далее. Для этого откройте файл ~/.tmux.conf и добавьте туда следующие строки:
```
set-option -g -q mouse on  
bind-key -T root WheelUpPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; copy-mode -e; send-keys -M"  
bind-key -T root WheelDownPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; send-keys -M"
```

Сохраните изменения, нажмите **Ctrl+b :**, а потом выполните такую команду чтобы перезагрузить tmux:

```
$ source ~/.tmux.conf
```


### Ссылки

[страница проекта](https://github.com/tmux/tmux/wiki)
[подробно про tmux](https://losst.ru/shpargalka-po-tmux)
[шпаргалка с хабра](https://habr.com/ru/post/327630/)
[расширенные возможности](https://habr.com/ru/post/516488/)

#terminal #tmux #cli